angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,r,a){function t(){return angular.isDefined(e.maxParam)?e.maxParam:a.max}var n=this,i=angular.isDefined(r.animate)?e.$parent.$eval(r.animate):a.animate;this.bars=[],e.max=t(),this.addBar=function(e,r,a){i||r.css({transition:"none"}),this.bars.push(e),e.max=t(),e.title=a&&angular.isDefined(a.title)?a.title:"progressbar",e.$watch("value",function(r){e.recalculatePercentage()}),e.recalculatePercentage=function(){var r=n.bars.reduce(function(e,r){return r.percent=+(100*r.value/r.max).toFixed(2),e+r.percent},0);r>100&&(e.percent-=r-100)},e.$on("$destroy",function(){r=null,n.removeBar(e)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){n.bars.forEach(function(e){e.max=t(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,r,a,t){t.addBar(e,r,a)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,r,a,t){t.addBar(e,angular.element(r.children()[0]),{title:a.title})}}});
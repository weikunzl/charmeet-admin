define([],function(){"use strict";return["$scope","$stateParams","uiGridConstants","deductService","i18nService",function(e,t,n,a,i){i.setCurrentLang("zh-cn"),e.monthAry=[1,2,3,4,5,6,7,8,9,10,11,12],e.yearAry=[];var l=(new Date).getYear()+1900;e.yearAry.push(l),t.page||(t.page=1);for(var r={pageNumber:t.page,pageSize:25,sort:null},o=l-1;o>2010;o--)e.yearAry.push(o);e.gridOptions={enableSorting:!0,paginationPageSizes:[25,50,75,100],paginationPageSize:25,columnDefs:[{name:"别名",field:"aileName",enableCellEdit:!1},{name:"消费金额",field:"shoppingCost",cellFilter:"currency",enableCellEdit:!1},{name:"消费类型",field:"shoppingType",cellFilter:"mapShoppingType",enableCellEdit:!1},{name:"消费时间",field:"shoppingTime",cellFilter:"date:'yyyy-MM-dd'",enableCellEdit:!1},{name:"提成金额",field:"earn",cellFilter:"currency",enableCellEdit:!1},{name:"提成状态",field:"payflag",cellFilter:"mapPayflag",enableCellEdit:!1,cellClass:function(e,t,n,a,i){var l=e.getCellValue(t,n);return 1===l?"text-warning":3===l?"text-danger":2===l?"text-success":void 0}}],data:[],useExternalPagination:!0,onRegisterApi:function(n){e.gridApi=n,e.gridApi.core.on.sortChanged(e,function(e,t){0==t.length?r.sort=null:r.sort=t[0].sort.direction,s(r)}),n.pagination.on.paginationChanged(e,function(e,n){r.pageNumber=e,r.pageSize=n,t.page=e,s(r)})}};var s=function(t){var n=r;n.year=e.yearSelect,n.month=e.monthSelect,a.getDeductList(n).success(function(t){t.data&&t.data.length>0&&(e.gridOptions.data=t.data),e.gridOptions.totalItems=t.total})};e.getPage=function(){s(r)},e.enterPress=function(){(event.keyCode=13)&&s(r)},s(r),e.noPayment=0,e.waitPayment=0,e.sumNoPayment=function(){var t={};t.year=e.yearSelect,t.month=e.monthSelect,a.sumNoPayment(t).success(function(t){t&&(e.noPayment=t.totalearn||0)})},e.sumWaitPayment=function(){var t={};t.year=e.yearSelect,t.month=e.monthSelect,a.sumWaitPayment(t).success(function(t){t&&(e.waitPayment=t.totalearn||0)})},e.sumWaitPayment(),e.sumNoPayment()}]});
describe("popover",function(){var e,t,i,n,c;beforeEach(module("ui.bootstrap.popover")),beforeEach(module("uib/template/popover/popover-html.html")),beforeEach(inject(function(p,o,l,s){$document=s,t=angular.element('<div><span uib-popover-html="template">Selector Text</span></div>'),i=p,i.template=l.trustAsHtml("<span>My template</span>"),o(t)(i),i.$digest(),e=t.find("span"),n=e.scope(),c=n.$$childTail})),afterEach(function(){$document.off("keypress")}),it("should not be open initially",inject(function(){expect(c.isOpen).toBe(!1),expect(t.children().length).toBe(1)})),it("should open on click",inject(function(){e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),expect(t.children().length).toBe(2)})),it("should close on second click",inject(function(){e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!1)})),it("should not open on click if template is empty",inject(function(){i.template=null,i.$digest(),e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!1),expect(t.children().length).toBe(1)})),it("should show updated text",inject(function(n){i.template=n.trustAsHtml("<span>My template</span>"),i.$digest(),e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),expect(t.children().eq(1).text().trim()).toBe("My template"),i.template=n.trustAsHtml("<span>Another template</span>"),i.$digest(),expect(t.children().eq(1).text().trim()).toBe("Another template")})),it("should hide popover when template becomes empty",inject(function(n){e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),i.template="",i.$digest(),expect(c.isOpen).toBe(!1),n.flush(),expect(t.children().length).toBe(1)})),it("should not unbind event handlers created by other directives - issue 456",inject(function(n){i.click=function(){i.clicked=!i.clicked},t=angular.element('<div><input uib-popover-html="template" ng-click="click()" popover-trigger="mouseenter"/></div>'),n(t)(i),i.$digest(),e=t.find("input"),e.trigger("mouseenter"),c.$digest(),e.trigger("mouseleave"),c.$digest(),expect(i.clicked).toBeFalsy(),e.click(),expect(i.clicked).toBeTruthy()})),it("should popup with animate class by default",inject(function(){e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),expect(t.children().eq(1)).toHaveClass("fade")})),it("should popup without animate class when animation disabled",inject(function(p){t=angular.element('<div><span uib-popover-html="template" popover-animation="false">Selector Text</span></div>'),p(t)(i),i.$digest(),e=t.find("span"),n=e.scope(),c=n.$$childTail,e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),expect(t.children().eq(1)).not.toHaveClass("fade")})),it("should display the title",inject(function(n){t=angular.element('<div><span uib-popover-html="template" popover-title="popover title">Selector Text</span></div>'),n(t)(i),i.$digest(),e=t.find("span"),e.trigger("click"),i.$digest();var c=t.find(".popover-title");expect(c.text()).toBe("popover title")})),describe("supports options",function(){describe("placement",function(){it("can specify an alternative, valid placement",inject(function(p){t=angular.element('<div><span uib-popover-html="template" popover-placement="left">Trigger here</span></div>'),p(t)(i),i.$digest(),e=t.find("span"),n=e.scope(),c=n.$$childTail,e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),expect(t.children().length).toBe(2);var o=t.find("div.popover");expect(o).toHaveClass("left")}))}),describe("class",function(){it("can specify a custom class",inject(function(p){t=angular.element('<div><span uib-popover-html="template" popover-class="custom">Trigger here</span></div>'),p(t)(i),i.$digest(),e=t.find("span"),n=e.scope(),c=n.$$childTail,e.trigger("click"),c.$digest(),expect(c.isOpen).toBe(!0),expect(t.children().length).toBe(2);var o=t.find("div.popover");expect(o).toHaveClass("custom")}))})})});